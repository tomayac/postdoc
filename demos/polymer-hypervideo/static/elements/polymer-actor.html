<link rel="import" href="../bower_components/polymer/polymer.html">

<polymer-element name="polymer-actor" attributes="start end name xywh url">
  <template>
    <link href="polymer-actor.css" media="all" rel="stylesheet" type="text/css"/>
    <div id="container" class="container"></div>
  </template>
  <script>
    Polymer('polymer-actor', {
      created: function() {
      },
      ready: function() {
        if (this.url && this.name) {
          this.$.container.innerHTML = '<a href="' + this.url + '">' +
              this.name + '</a>';
        } else if (this.name) {
          this.$.container.innerHTML = this.name;
        } else if (this.url) {
          this.$.container.innerHTML = this.url;
        }
        this.$.container.style.display = 'none';

        // listen for the parent hypervideo's timeupdate events and toggle the
        // overlay's visibility accordingly to its start and end
        var that = this;
        document.addEventListener('hypervideotimeupdate', function(e) {
          that.currentTime = e.detail.currentTime;
          if ((that.start <= that.currentTime) &&
              (that.currentTime < that.end)) {
            that.$.container.style.display = 'block';
          } else {
            that.$.container.style.display = 'none';
          }
        });
      }
    });
  </script>
</polymer-element>